<ui:composition 
    template="layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

    <ui:define name="content">
        <div class='row'>
            <div style='text-align: center;width:100%'>
                <img src='./resources/image/testLogo.png' class='img-responsive' style='display:inline;'/>
                <img src='./resources/image/sousLogoTest.png' class='img-responsive' style='display:inline;'/>
            </div>
            <br/>
            <!--<h5 style="text-align:center;">Moteur de recherche dédié au mailing de masse</h5>
            <h4 style="text-align:center;">Le premier moteur de dédié au mailing de masse</h4>-->
            <f:view>
                <div class="row">
                    <h:form style="text-align:center;">
                        <div class="col-md-10" style="margin-top:5px;">
                            <h:inputText id="therm" value="#{searchManagedBean.search.therm}" required='required' title="Therm" class='form-control' p:placeholder="Recherche par mot clés..." />

                        </div>
                        <div class="col-md-2">
                            <h:commandButton class="btn btn-primary" value="Rechercher" style="margin-top:5px;display:inline;" action="#{searchManagedBean.createSearch()}"/>
                        </div>
                        <div class='col-md-12' style='margin-top:20px;'>
                            <h:panelGroup rendered="#{loginManagedBean.loggedIn}">
                                <div class="panel panel-primary">
                                    <div class="panel-heading">
                                        <div class='panel-title'>
                                            <h5 class='pull-left'>Options de recherche</h5>
                                            <a href='#' class='showPanel' style='color:white;'><i class='fa fa-arrow-down pull-right fa-2x'></i></a>
                                            <a href='#' class='hidePanel' style='color:white;'><i class='fa fa-arrow-up pull-right fa-2x'></i></a>
                                            <div class='clearfix'></div>
                                        </div>
                                    </div>
                                    <div class="panel-body">
                                        <h5>Niveau de profondeur de la recherche</h5>
                                        <h:selectOneMenu value="#{searchManagedBean.deepLevel}" class='form-control'>
                                            <f:selectItem itemValue="#{null}" itemLabel="-- Niveau de profondeur --" />
                                            <f:selectItem itemValue="1" itemLabel="Niveau 1" />
                                            <f:selectItem itemValue="2" itemLabel="Niveau 2" />
                                            <f:selectItem itemValue="3" itemLabel="Niveau 3" />
                                            <f:selectItem itemValue="4" itemLabel="Niveau 4" />
                                            <f:selectItem itemValue="5" itemLabel="Niveau 5" />
                                        </h:selectOneMenu>
                                        <hr/>
                                        <h:selectBooleanCheckbox id="isFr" value="#{searchManagedBean.search.isFr}" /> Uniquement page .fr
                                    </div>
                                </div>
                            </h:panelGroup>
                        </div>
                    </h:form>
                </div>
            </f:view>

            <div class="row searchResults">
                <h3 style='text-align: center;'>Résultats</h3>
                <hr/>
                <!-- Resultats factisses pour les tests (Avant implementation algo scrapping) 
                <table class="table" style='margin-top:15px;'>
                    <thead>
                        <th><input type="checkbox"/> Tout cocher</th>
                        <th>Résultat</th>
                        <th>Site</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="checkbox" value='michel@jeanMichel.com'/></td>
                            <td>michel@jeanMichel.com</td>
                            <td><a href="#">http://www.lesiteamichel.com</a></td>
                        </tr>
                    </tbody>
                </table>-->
                <f:view>


                    <h:form>
                        <h:dataTable value="#{searchResultsManagedBean.searchResults}" var="item" class="table">
                            <h:column>
                                <f:facet name="header">
                                    <input type="checkbox"/> <h:outputText value="Tout cocher"/> 
                                </f:facet>
                                <input type="checkbox"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="EmailResult"/>
                                </f:facet>
                                <h:outputText value="#{item.emailResult}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="SiteFound"/>
                                </f:facet>
                                <h:outputText value="#{item.siteFound}"/>
                            </h:column>
                        </h:dataTable>
                    </h:form>
                </f:view>

                <h:link rendered="#{loginManagedBean.loggedIn}" style='color:white;' class='btn btn-primary pull-right' value='Créer campagne' outcome='#{campaignManagedBean.getCampaignView()}'/>
            </div>
        </div>
    </ui:define>

</ui:composition>